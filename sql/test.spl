-- 기존 테이블이 있다면 삭제
DROP TABLE MEMBER CASCADE CONSTRAINTS PURGE;
DROP TABLE TOUR CASCADE CONSTRAINTS PURGE;
DROP TABLE GUIDE CASCADE CONSTRAINTS PURGE;
DROP TABLE USERS CASCADE CONSTRAINTS PURGE;

CREATE TABLE MEMBER (
    MEMBER_ID   VARCHAR2(50) PRIMARY KEY,
    PASSWORD    VARCHAR2(100) NOT NULL,
    NAME        VARCHAR2(50) NOT NULL,
    EMAIL       VARCHAR2(100),
    REG_DATE    DATE DEFAULT SYSDATE
);

CREATE TABLE TOUR (
    TOUR_ID     NUMBER PRIMARY KEY,
    TITLE       VARCHAR2(100) NOT NULL,
    PRICE       NUMBER NOT NULL,
    SALE_PRICE  NUMBER,
    TAG         VARCHAR2(50),
    IMG_URL     VARCHAR2(200)
);

CREATE TABLE GUIDE (
    GUIDE_ID    NUMBER PRIMARY KEY,
    NAME        VARCHAR2(50) NOT NULL,
    INTRO       VARCHAR2(200),
    TAGS        VARCHAR2(100),
    IMG_URL     VARCHAR2(200)
);

CREATE TABLE USERS (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EMAIL VARCHAR2(100) UNIQUE NOT NULL,
    PASSWORD VARCHAR2(100) NOT NULL,
    NICKNAME VARCHAR2(50) NOT NULL,
    ROLE VARCHAR2(20) DEFAULT 'USER' NOT NULL,
    CREATED_AT DATE DEFAULT SYSDATE NOT NULL,
    NAME VARCHAR2(50),
    GENDER VARCHAR2(10),
    RRN VARCHAR2(13),
    BIRTH DATE,
    ADDRESS VARCHAR2(200),
    PHONE VARCHAR2(20)
);

SELECT ID, EMAIL, NICKNAME, ROLE FROM USERS;

-- 일반 사용자로 변경
UPDATE USERS SET ROLE = 'USER' WHERE ID = [사용자ID];

-- 판매자로 변경
UPDATE USERS SET ROLE = 'SELLER' WHERE ID = [사용자ID];

-- 관리자로 변경
UPDATE USERS SET ROLE = 'ADMIN' WHERE ID = [사용자ID];
UPDATE USERS SET ROLE = 'ADMIN' WHERE EMAIL = 'qpqpxxqpqp@naver.com';
COMMIT;