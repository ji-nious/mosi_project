import{r as n,j as e,c as u}from"./client-D_PkVYew.js";function f(){const[a,o]=n.useState(null),[h,i]=n.useState(!0),[l,x]=n.useState(null);n.useEffect(()=>{j()},[]);const j=async()=>{try{const r=new URLSearchParams(window.location.search).get("orderCode");if(!r)throw new Error("주문번호가 없습니다.");i(!0);const t=await fetch(`/order/complete/data?orderCode=${r}`);if(!t.ok)throw new Error("주문 정보를 불러올 수 없습니다.");const p=await t.json();o(p)}catch(s){console.error("주문 완료 데이터 조회 실패:",s),x(s.message)}finally{i(!1)}},c=s=>s?.toLocaleString()||"0",m=s=>{try{return new Date(s).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\. /g,".").replace(".","")}catch{return s||""}};if(h)return e.jsx("div",{className:"complete-message",children:e.jsx("h2",{children:"주문 정보를 불러오는 중..."})});if(l)return e.jsxs("div",{className:"complete-message",children:[e.jsx("h2",{children:"오류가 발생했습니다"}),e.jsx("p",{children:l}),e.jsx("button",{onClick:()=>window.location.href="/",children:"홈으로 이동"})]});if(!a)return e.jsxs("div",{className:"complete-message",children:[e.jsx("h2",{children:"주문 정보를 찾을 수 없습니다"}),e.jsx("button",{onClick:()=>window.location.href="/",children:"홈으로 이동"})]});const d=a.orderItems?.reduce((s,r)=>s+r.salePrice*r.quantity,0)||0;return e.jsxs("div",{className:"order-complete-container",children:[e.jsxs("div",{className:"complete-message",children:[e.jsxs("div",{className:"complete-icon",children:[e.jsx("i",{className:"fas fa-shopping-bag"}),e.jsx("div",{className:"success-badge",children:e.jsx("i",{className:"fas fa-check"})})]}),e.jsx("h2",{children:"주문이 완료되었습니다"}),e.jsxs("p",{className:"order-date",children:[m(a.orderDate)," 주문하신 상품의",e.jsx("br",{}),"주문번호는 ",a.orderCode,"입니다."]})]}),e.jsxs("div",{className:"complete-section",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx("i",{className:"fas fa-shopping-bag"}),"주문상품"]}),e.jsxs("table",{className:"order-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"상품명"}),e.jsx("th",{children:"옵션"}),e.jsx("th",{children:"가격"})]})}),e.jsx("tbody",{children:a.orderItems?.map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"product-info",children:[e.jsx("div",{className:"product-image",children:e.jsx("img",{src:s.productImage||"/images/placeholder.png",alt:s.productName,onError:t=>{t.target.style.display="none"}})}),e.jsx("span",{children:s.productName})]})}),e.jsxs("td",{children:["(",s.optionType,")"]}),e.jsx("td",{children:e.jsxs("div",{className:"price-info",children:[s.originalPrice&&s.originalPrice!==s.salePrice&&e.jsxs("span",{className:"original-price",children:[c(s.originalPrice*s.quantity),"원"]}),e.jsxs("span",{className:"sale-price",children:[c(s.salePrice*s.quantity),"원"]})]})})]},r))})]})]}),e.jsxs("div",{className:"info-sections",children:[e.jsxs("div",{className:"info-section",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx("i",{className:"fas fa-user"}),"주문자 정보"]}),e.jsxs("table",{className:"info-table",children:[e.jsxs("tr",{children:[e.jsx("td",{children:"주문자명"}),e.jsx("td",{id:"orderer-name",children:"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"연락처"}),e.jsx("td",{id:"orderer-phone",children:"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"이메일"}),e.jsx("td",{id:"orderer-email",children:"-"})]}),a.specialRequest&&e.jsxs("tr",{children:[e.jsx("td",{children:"요청사항"}),e.jsx("td",{children:a.specialRequest})]})]})]}),e.jsxs("div",{className:"info-section",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx("i",{className:"fas fa-credit-card"}),"결제정보"]}),e.jsxs("table",{className:"info-table",children:[e.jsxs("tr",{children:[e.jsx("td",{children:"상품금액"}),e.jsxs("td",{className:"price-amount",children:[c(d),"원"]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"총 결제 금액"}),e.jsxs("td",{className:"total-amount",children:[c(d),"원"]})]})]})]})]}),e.jsxs("div",{className:"complete-actions",children:[e.jsx("a",{href:"/order/complete/history",className:"btn btn-primary",children:"주문내역 확인"}),e.jsx("a",{href:"/order/complete/shopping",className:"btn btn-secondary",children:"쇼핑 계속하기"})]})]})}const N=document.getElementById("order-complete-root"),g=u.createRoot(N);g.render(e.jsx(f,{}));
