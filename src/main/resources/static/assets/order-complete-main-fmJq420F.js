import{r as a,j as e,c as g}from"./client-D_PkVYew.js";function b(){const[r,x]=a.useState(null),[j,d]=a.useState(!0),[o,m]=a.useState(null);a.useEffect(()=>{p()},[]);const p=async()=>{try{const c=new URLSearchParams(window.location.search).get("orderCode");if(!c)throw new Error("주문번호가 없습니다.");d(!0);const n=await fetch(`/order/complete/data?orderCode=${c}`);if(!n.ok){const h=await n.json().catch(()=>({})),f=h.header?.rtmsg||h.message||"주문 정보를 불러올 수 없습니다.";throw new Error(f)}const t=await n.json();if(t.header&&t.header.rtcd!=="S00")throw new Error(t.header.rtmsg||"주문 정보를 불러올 수 없습니다.");const l=t.body||t;console.log("📋 주문완료 데이터:",l),console.log("📝 요청사항:",l.specialRequest),x(l)}catch(s){console.error("주문 완료 데이터 조회 실패:",s),m(s.message)}finally{d(!1)}},i=s=>s?.toLocaleString()||"0",u=s=>{try{return new Date(s).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\. /g,".").replace(".","")}catch{return s||""}};if(j)return e.jsx("div",{className:"order-complete-container",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"custom-spinner"}),e.jsx("div",{className:"loading-text",children:"주문 정보를 불러오는 중..."})]})});if(o)return e.jsxs("div",{className:"complete-message",children:[e.jsx("h2",{children:"오류가 발생했습니다"}),e.jsx("p",{children:o}),e.jsx("button",{onClick:()=>window.location.href="/",children:"홈으로 이동"})]});if(!r)return e.jsxs("div",{className:"complete-message",children:[e.jsx("h2",{children:"주문 정보를 찾을 수 없습니다"}),e.jsx("button",{onClick:()=>window.location.href="/",children:"홈으로 이동"})]});const N=r.orderItems?.reduce((s,c)=>s+c.cartPrice*c.quantity,0)||0;return e.jsxs("div",{className:"order-complete-container",children:[e.jsxs("div",{className:"complete-message",children:[e.jsxs("div",{className:"complete-icon",children:[e.jsx("i",{className:"fas fa-shopping-bag"}),e.jsx("div",{className:"success-badge",children:e.jsx("i",{className:"fas fa-check"})})]}),e.jsx("h2",{children:"주문이 완료되었습니다"}),e.jsxs("p",{className:"order-date",children:[u(r.orderDate)," 주문하신 상품의",e.jsx("br",{}),"주문번호는 ",r.orderCode,"입니다."]})]}),e.jsxs("div",{className:"complete-section",children:[e.jsx("h3",{className:"section-title",children:"주문상품"}),e.jsxs("table",{className:"order-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"상품명"}),e.jsx("th",{children:"옵션"}),e.jsx("th",{children:"판매자"}),e.jsx("th",{children:"금액"})]})}),e.jsx("tbody",{children:r.orderItems?.map((s,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("div",{className:"product-info",children:e.jsxs("a",{href:`/product/detail/${s.productId}`,className:"product-link",children:[e.jsx("div",{className:"product-image",children:e.jsx("img",{src:s.productImage||"/img/placeholder.png",alt:s.productName})}),e.jsx("span",{children:s.productName})]})})}),e.jsx("td",{children:s.optionType}),e.jsx("td",{children:s.sellerNickname||"판매자"}),e.jsxs("td",{children:[i(s.cartPrice*s.quantity),"원"]})]},c))})]})]}),e.jsxs("div",{className:"info-sections",children:[e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{className:"section-title",children:"주문자 정보"}),e.jsxs("table",{className:"info-table",children:[e.jsxs("tr",{children:[e.jsx("td",{children:"주문자명"}),e.jsx("td",{children:r.buyerName||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"연락처"}),e.jsx("td",{children:r.buyerPhone||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"이메일"}),e.jsx("td",{children:r.buyerEmail||"-"})]}),r.specialRequest&&e.jsxs("tr",{children:[e.jsx("td",{children:"요청사항"}),e.jsx("td",{children:r.specialRequest})]})]})]}),e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{className:"section-title",children:"결제정보"}),e.jsxs("table",{className:"info-table",children:[e.jsxs("tr",{children:[e.jsx("td",{children:"결제수단"}),e.jsx("td",{children:"간편 결제"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"total-label",children:"총 결제 금액"}),e.jsxs("td",{className:"total-amount",children:[i(N),"원"]})]})]})]})]}),e.jsxs("div",{className:"complete-actions",children:[e.jsx("a",{href:"/order/complete/history",className:"btn btn-primary",children:"주문내역 확인"}),e.jsx("a",{href:"/order/complete/shopping",className:"btn btn-secondary",children:"쇼핑 계속하기"})]})]})}const y=document.getElementById("order-complete-root"),v=g.createRoot(y);v.render(e.jsx(b,{}));
