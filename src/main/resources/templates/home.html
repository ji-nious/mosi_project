<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8" />
  <title>home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- Google Fonts: Cabin, Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Cabin:wght@600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --dl-layout-size-large: 144px;
      --dl-layout-size-small: 48px;
      --dl-layout-space-unit: 16px;
      --dl-layout-size-medium: 96px;
      --dl-layout-size-xlarge: 192px;
      --dl-layout-size-xsmall: 16px;
      --dl-color-theme-accent1: #C9B9A2;
      --dl-color-theme-accent2: #B7A976;
      --dl-layout-radius-round: 50%;
      --dl-layout-size-xxlarge: 288px;
      --dl-color-theme-primary1: #658352;
      --dl-color-theme-primary2: #94A687;
      --dl-layout-size-maxwidth: 1400px;
      --dl-layout-radius-radius4: 4px;
      --dl-layout-radius-cardradius: 8px;
      --dl-color-theme-neutral-dark: #1E2203;
      --dl-color-theme-neutral-light: #FBF9EF;
      --dl-color-theme-secondary2: #F5F4ED;
      --dl-color-theme-secondary1: #E9E7DE;
      --dl-layout-radius-imageradius: 8px;
    }

    body {
      font-family: 'Inter', 'Cabin', sans-serif;
      margin: 0;
      color: var(--dl-color-theme-neutral-dark);
      background: var(--dl-color-theme-neutral-light);
    }

    /* Navbar */
    .navbar8-container1 {
      top: 0;
      width: 100%;
      display: flex;
      z-index: 1000;
      position: sticky;
      border-radius: var(--dl-layout-radius-radius4);
      justify-content: center;
      background: var(--dl-color-theme-neutral-light);
      box-shadow: 0 2px 12px 0 rgba(0,0,0,0.06);
    }
    .navbar8-navbar-interactive {
      width: 100%;
      display: flex;
      max-width: var(--dl-layout-size-maxwidth);
      align-items: center;
      padding: 24px 48px;
      justify-content: space-between;
      margin: 0 auto;
    }
    .navbar8-image1 {
      height: 3rem;
      border-radius: 8px;
    }
    .navbar8-links1 {
      gap: 32px;
      display: flex;
      align-items: center;
      margin-left: 32px;
      flex-direction: row;
      justify-content: flex-start;
    }
    .thq-link {
      cursor: pointer;
      text-decoration: none;
      color: var(--dl-color-theme-primary1);
      font-weight: 600;
      font-size: 1.1rem;
      transition: color 0.2s;
    }
    .thq-link:hover {
      color: var(--dl-color-theme-accent2);
    }
            .navbar8-buttons1 {
            gap: 32px;
            display: flex;
            align-items: center;
            flex-direction: row;
        }
        .welcome-message {
            color: #444;
            font-weight: 600;
            font-size: 1rem;
            margin-right: 16px;
        }
    .thq-button-filled {
      color: var(--dl-color-theme-secondary1);
      cursor: pointer;
      display: flex;
      align-items: center;
      font-weight: bold;
      padding: 10px 32px;
      border: 1px solid var(--dl-color-theme-primary1);
      border-radius: 24px;
      background: var(--dl-color-theme-primary1);
      font-size: 1rem;
      text-decoration: none;
      transition: background .2s, color .2s;
    }
    .thq-button-filled:hover {
      color: var(--dl-color-theme-secondary2);
      background: var(--dl-color-theme-primary2);
      border-color: var(--dl-color-theme-primary2);
      text-decoration: none;
    }
    .thq-button-outline {
      color: var(--dl-color-theme-primary1);
      border: 1px solid var(--dl-color-theme-primary1);
      background: transparent;
      border-radius: 24px;
      font-weight: bold;
      padding: 10px 32px;
      cursor: pointer;
      font-size: 1rem;
      text-decoration: none;
      transition: background .2s, color .2s;
    }
    .thq-button-outline:hover {
      color: var(--dl-color-theme-secondary2);
      background: var(--dl-color-theme-primary2);
      border-color: var(--dl-color-theme-primary2);
      text-decoration: none;
    }

    /* Hero Section */
    .hero17-header78 {
      width: 100%;
      display: flex;
      position: relative;
      align-items: center;
      flex-direction: column;
      background: var(--dl-color-theme-secondary2);
      padding: 64px 0 48px 0;
    }
    .hero17-column {
      gap: 24px;
      width: 100%;
      display: flex;
      align-items: center;
      flex-direction: column;
      max-width: var(--dl-layout-size-maxwidth);
      margin: 0 auto;
      padding-bottom: 16px;
    }
    .hero17-content1 {
      gap: 24px;
      display: flex;
      align-items: center;
      flex-direction: column;
      margin-bottom: 18px;
    }
    .thq-heading-1 {
      font-size: 42px;
      font-family: Cabin;
      font-weight: 700;
      line-height: 1.3;
      letter-spacing: -1px;
      text-align: center;
      margin: 0;
    }
    .thq-body-large {
      font-size: 18px;
      font-family: Cabin;
      color: #333;
      line-height: 1.6;
      margin-bottom: 0;
      text-align: center;
    }
    .hero17-actions {
      gap: 16px;
      display: flex;
      align-items: center;
      margin-top: 16px;
    }

    /* Post Grid Section */
    .posts-section {
        width: 100%;
        padding: 64px 48px;
        background-color: var(--dl-color-theme-neutral-light);
    }
    .posts-container {
        width: 100%;
        max-width: var(--dl-layout-size-maxwidth);
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .posts-container h2 {
        font-size: 32px;
        font-family: 'Cabin', sans-serif;
        font-weight: 700;
        margin-bottom: 48px;
    }
    .posts-grid {
        width: 100%;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 32px;
    }
    .post-card {
        text-decoration: none;
        color: var(--dl-color-theme-neutral-dark);
        display: flex;
        flex-direction: column;
    }
    .post-card img {
        width: 100%;
        height: 250px;
        object-fit: cover;
        border-radius: var(--dl-layout-radius-cardradius);
        margin-bottom: 16px;
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .post-card:hover img {
        transform: translateY(-5px);
        box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    }
    .post-info {
        padding: 8px 4px;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
    }
    .post-title {
        font-size: 0.95rem;
        font-weight: 500;
        line-height: 1.4;
        color: #333;
        margin-bottom: 8px;
        /* Allow multiple lines, but limit height */
        height: 40px; /* approx 2 lines */
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
    }
    .post-price {
        margin-top: 4px;
        font-size: 1.2rem;
        font-weight: 700;
        color: var(--dl-color-theme-neutral-dark);
    }

    @media(max-width: 991px) {
      .hero17-header78 { padding: 48px 0 32px 0; }
      .posts-grid { grid-template-columns: repeat(2, 1fr); }
    }
    @media(max-width: 767px) {
      .navbar8-navbar-interactive { padding: 16px 16px;}
      .posts-section { padding: 48px 16px; }
      .posts-grid { gap: 16px; }
    }
    @media(max-width: 479px) {
      .posts-grid { grid-template-columns: 1fr; }
    }

    /* Alert Message Styles */
    .alert-message {
        position: fixed;
        top: 80px;
        left: 50%;
        transform: translateX(-50%);
        min-width: 400px;
        max-width: 600px;
        z-index: 10000;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        animation: slideDown 0.3s ease-out;
        font-family: 'Inter', sans-serif;
    }

    .alert-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 16px 20px;
        font-size: 16px;
        font-weight: 600;
        border-radius: 12px;
    }

    .success-message .alert-content {
        background: linear-gradient(135deg, #658352 0%, #5a7349 100%);
        color: white;
    }

    .error-message .alert-content {
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        color: white;
    }

    .alert-close {
        background: none;
        border: none;
        color: white;
        font-size: 24px;
        font-weight: bold;
        cursor: pointer;
        padding: 0;
        margin-left: 12px;
        opacity: 0.8;
        transition: opacity 0.2s;
    }

    .alert-close:hover {
        opacity: 1;
    }

    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateX(-50%) translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
    }

    @keyframes slideUp {
        from {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
        to {
            opacity: 0;
            transform: translateX(-50%) translateY(-20px);
        }
    }

    @media(max-width: 479px) {
        .alert-message {
            min-width: 300px;
            top: 70px;
        }
        .alert-content {
            padding: 12px 16px;
            font-size: 14px;
        }
    }

    /* 로그인 완료 모달 스타일 */
    .login-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(10px);
        z-index: 20000;
        display: flex;
        justify-content: center;
        align-items: center;
        animation: fadeIn 0.3s ease;
    }

    .login-modal-content {
        background: #ffffff;
        padding: 60px 50px 50px 50px;
        border-radius: 16px;
        width: 90%;
        max-width: 480px;
        box-shadow: 
            0 20px 40px rgba(0, 0, 0, 0.1),
            0 10px 20px rgba(0, 0, 0, 0.05);
        text-align: center;
        position: relative;
        animation: slideIn 0.4s ease-out;
        border: none;
    }

    .login-success-icon {
        width: 88px;
        height: 88px;
        margin: 0 auto 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #658352;
        color: white;
        box-shadow: 0 4px 20px rgba(101, 131, 82, 0.2);
        position: relative;
    }

    .login-success-icon::before {
        content: '';
        position: absolute;
        width: 8px;
        height: 16px;
        border: solid white;
        border-width: 0 4px 4px 0;
        transform: rotate(45deg);
        margin-left: 4px;
        margin-top: -4px;
    }

    .login-success-title {
        font-size: 1.3rem;
        font-weight: 600;
        color: #333333;
        margin-bottom: 16px;
        font-family: 'Inter', 'Cabin', sans-serif;
        line-height: 1.4;
        letter-spacing: -0.02em;
    }

    .login-success-message {
        font-size: 0.95rem;
        font-weight: 400;
        color: #666666;
        margin-bottom: 40px;
        line-height: 1.5;
        font-family: 'Inter', 'Cabin', sans-serif;
    }

    .login-success-button {
        padding: 16px 32px;
        border: none;
        border-radius: 8px;
        font-size: 0.95rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 120px;
        position: relative;
        overflow: hidden;
        font-family: 'Inter', 'Cabin', sans-serif;
        letter-spacing: -0.01em;
        background: #658352;
        color: white;
        border: 1px solid #658352;
        box-shadow: 0 2px 8px rgba(101, 131, 82, 0.2);
    }

    .login-success-button::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
    }

    .login-success-button:hover::before {
        width: 300px;
        height: 300px;
    }

    .login-success-button:hover {
        background: #4d683f;
        border-color: #4d683f;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(101, 131, 82, 0.3);
    }

    @media (max-width: 768px) {
        .login-modal-content {
            width: 95%;
            max-width: 380px;
            padding: 50px 30px 40px 30px;
        }
        
        .login-success-icon {
            width: 75px;
            height: 75px;
            margin: 0 auto 25px;
        }
        
        .login-success-icon::before {
            width: 7px;
            height: 14px;
            border-width: 0 3px 3px 0;
            margin-left: 3px;
            margin-top: -3px;
        }
        
        .login-success-title {
            font-size: 1.2rem;
            margin-bottom: 14px;
        }
        
        .login-success-message {
            font-size: 0.9rem;
            margin-bottom: 35px;
        }
        
        .login-success-button {
            padding: 14px 24px;
            font-size: 0.9rem;
            min-width: 100px;
        }
    }
  </style>
</head>
<body>
  <!-- 성공/에러 메시지 표시 (로그인 모달이 표시될 때는 제외) -->
  <div th:if="${success}" th:unless="${showLoginModal}" class="alert-message success-message" id="successAlert">
    <div class="alert-content">
      <span th:text="${success}"></span>
      <button type="button" class="alert-close" onclick="closeAlert('successAlert')">&times;</button>
    </div>
  </div>
  
  <div th:if="${error}" class="alert-message error-message" id="errorAlert">
    <div class="alert-content">
      <span th:text="${error}"></span>
      <button type="button" class="alert-close" onclick="closeAlert('errorAlert')">&times;</button>
    </div>
  </div>

  <div th:if="${message}" class="alert-message success-message" id="messageAlert">
    <div class="alert-content">
      <span th:text="${message}"></span>
      <button type="button" class="alert-close" onclick="closeAlert('messageAlert')">&times;</button>
    </div>
  </div>

  <!-- 로그인 완료 모달 -->
  <div th:if="${showLoginModal}" class="login-modal-overlay" id="loginModal">
    <div class="login-modal-content">
      <div class="login-success-icon"></div>
      <div class="login-success-title">로그인 완료</div>
      <div class="login-success-message" th:text="${loginMessage}"></div>
      
      <button type="button" class="login-success-button" onclick="closeLoginModal()">확인</button>
    </div>
  </div>

  <!-- Navbar -->
  <header class="navbar8-container1">
    <div class="navbar8-navbar-interactive">
      <a th:href="@{/}">
        <img th:src="@{/images/free-icon-sprout-7101338.png}" alt="로고" class="navbar8-image1"/>
      </a>
      <!-- 로그인 상태에 따른 네비게이션 버튼 -->
      <div class="navbar8-buttons1" th:if="${session.loginMember == null}">
        <a th:href="@{/login}" class="thq-button-outline">로그인</a>
        <a th:href="@{/signup}" class="thq-button-filled">회원가입</a>
      </div>
      <div class="navbar8-buttons1" th:if="${session.loginMember != null}">
        <span class="welcome-message" th:text="${session.loginMember.nickname} + '님, 환영합니다.'"></span>
        <a th:href="@{/buyer/info}" th:if="${session.loginMember.buyer}" class="thq-button-filled">마이페이지</a>
        <a th:href="@{/seller/info}" th:if="${session.loginMember.seller}" class="thq-button-filled">마이페이지</a>
        <a href="#" onclick="logout()" class="thq-button-outline">로그아웃</a>
      </div>
    </div>
  </header>
  <!-- Hero -->
  <section class="hero17-header78">
    <div class="hero17-column">
      <div class="hero17-content1">
        <h1 class="thq-heading-1">소비자에게 신뢰할 수 있는 고품질 농산물을 제공하는 직거래 온라인 플랫폼</h1>
        <p class="thq-body-large">농사를 즐겁게, 소비를 이롭게</p>
      </div>
      <!-- <div class="hero17-actions">
        <button class="thq-button-filled">회원 가입</button>
        <button class="thq-button-outline">자세히 보기</button>
      </div> -->
    </div>
  </section>
  <!-- Posts Grid -->
  <section class="posts-section">
    <div class="posts-container">
        <div class="posts-grid" id="postsGrid">
            <!-- JS Renders Posts Here -->
        </div>
    </div>
  </section>
  <script>
    // posts 데이터는 실제 API에서 받아오도록 교체 가능
    // {id, title, imageUrl, price}
    const posts = [
      {id: 1, title: "청정 고랭지 양배추 1통", imageUrl: "https://images.unsplash.com/photo-1502741338009-cac2772e18bc?auto=format&fit=crop&w=400&q=80", price: "5,500원"},
      {id: 2, title: "아삭하고 달콤한 가을 무 1개", imageUrl: "https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80", price: "3,000원"},
      {id: 3, title: "유기농 시금치 1단", imageUrl: "https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=400&q=80", price: "4,000원"},
      {id: 4, title: "신선한 로메인 상추 200g", imageUrl: "https://cdn.pixabay.com/photo/2014/07/23/11/51/kiwifruit-400143_1280.jpg", price: "3,500원"},
      {id: 5, title: "색깔별 파프리카 3종 세트", imageUrl: "https://images.unsplash.com/photo-1502741338009-cac2772e18bc?auto=format&fit=crop&w=400&q=80", price: "6,000원"},
      {id: 6, title: "싱싱한 다다기 오이 3개입", imageUrl: "https://images.unsplash.com/photo-1464226184884-fa280b87c399?auto=format&fit=crop&w=400&q=80", price: "4,200원"},
      {id: 7, title: "통통한 애호박 1개", imageUrl: "https://images.unsplash.com/photo-1506084868230-bb9d95c24759?auto=format&fit=crop&w=400&q=80", price: "2,800원"},
      {id: 8, title: "햇 양파 1.5kg 한 망", imageUrl: "https://cdn.pixabay.com/photo/2017/08/13/00/58/raspberry-2635886_640.jpg", price: "5,900원"},
      {id: 9, title: "국산 6쪽마늘 500g", imageUrl: "https://images.unsplash.com/photo-1502741338009-cac2772e18bc?auto=format&fit=crop&w=400&q=80", price: "8,800원"},
      {id: 10, title: "포슬포슬 햇 감자 1kg", imageUrl: "https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80", price: "6,500원"},
      {id: 11, title: "꿀처럼 달콤한 호박고구마 1kg", imageUrl: "https://cdn.pixabay.com/photo/2021/10/31/14/43/avocados-6757663_640.jpg", price: "9,900원"},
      {id: 12, title: "신선 브로콜리 1송이", imageUrl: "https://images.unsplash.com/photo-1464226184884-fa280b87c399?auto=format&fit=crop&w=400&q=80", price: "3,700원"},
      {id: 13, title: "산지직송 무농약 당근 1kg", imageUrl: "https://images.unsplash.com/photo-1506084868230-bb9d95c24759?auto=format&fit=crop&w=400&q=80", price: "7,000원"},
      {id: 14, title: "GAP 인증 부사 사과 2kg (5-6과)", imageUrl: "https://cdn.pixabay.com/photo/2013/10/17/10/59/pomegranate-196800_640.jpg", price: "15,000원"},
      {id: 15, title: "고당도 샤인머스캣 1kg", imageUrl: "https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=400&q=80", price: "25,000원"},
      {id: 16, title: "논산 설향 딸기 500g", imageUrl: "https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80", price: "18,000원"},
      {id: 17, title: "제주산 하우스 감귤 2.5kg", imageUrl: "https://cdn.pixabay.com/photo/2020/09/02/10/20/hass-avocados-5537945_640.jpg", price: "16,000원"},
      {id: 18, title: "아보카도 3개입", imageUrl: "https://images.unsplash.com/photo-1464226184884-fa280b87c399?auto=format&fit=crop&w=400&q=80", price: "7,500원"},
      {id: 19, title: "국내산 블루베리 200g", imageUrl: "https://images.unsplash.com/photo-1502741338009-cac2772e18bc?auto=format&fit=crop&w=400&q=80", price: "9,000원"},
      {id: 20, title: "새송이 버섯 1봉", imageUrl: "https://cdn.pixabay.com/photo/2020/09/04/11/28/apples-5543778_640.jpg", price: "2,500원"},
      {id: 21, title: "무농약 대추방울토마토 500g", imageUrl: "https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=400&q=80", price: "8,500원"},
      {id: 22, title: "강원도 찰옥수수 5개입", imageUrl: "https://images.unsplash.com/photo-1506084868230-bb9d95c24759?auto=format&fit=crop&w=400&q=80", price: "9,900원"},
      {id: 23, title: "해남 포기김치 3kg", imageUrl: "https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80", price: "29,000원"},
      {id: 24, title: "완숙 토마토 1kg", imageUrl: "https://cdn.pixabay.com/photo/2015/02/14/18/10/pineapple-636562_640.jpg", price: "11,000원"}
    ];

    function renderPostGrid(posts, gridElem) {
        gridElem.innerHTML = posts.map(post => `
            <a href="/buyer/product/${post.id}" class="post-card" title="${post.title}">
                <img src="${post.imageUrl}" alt="${post.title}">
                <div class="post-info">
                    <p class="post-title">${post.title}</p>
                    <p class="post-price">${post.price}</p>
                </div>
            </a>
        `).join('');
    }

    const postsGrid = document.getElementById('postsGrid');
    if (postsGrid) {
        renderPostGrid(posts, postsGrid);
    }

    // 로그아웃 기능
    function logout() {
        if (confirm('로그아웃 하시겠습니까?')) {
            // POST 방식으로 로그아웃 요청
            const form = document.createElement('form');
            form.method = 'POST';
            form.action = '/logout';
            document.body.appendChild(form);
            form.submit();
        }
    }

    // Alert 메시지 닫기 함수
    function closeAlert(alertId) {
        const alert = document.getElementById(alertId);
        if (alert) {
            alert.style.animation = 'slideUp 0.3s ease-in';
            setTimeout(() => {
                alert.style.display = 'none';
            }, 300);
        }
    }

    // 로그인 완료 모달 닫기 함수
    function closeLoginModal() {
        const modal = document.getElementById('loginModal');
        if (modal) {
            modal.style.display = 'none';
        }
    }

    // 자동 닫기 타이머
    document.addEventListener('DOMContentLoaded', function() {
        const successAlert = document.getElementById('successAlert');
        const errorAlert = document.getElementById('errorAlert');
        const messageAlert = document.getElementById('messageAlert');

        if (successAlert) {
            setTimeout(() => closeAlert('successAlert'), 4000); // 4초 후 자동 닫기
        }

        if (errorAlert) {
            setTimeout(() => closeAlert('errorAlert'), 6000); // 6초 후 자동 닫기
        }

        if (messageAlert) {
            setTimeout(() => closeAlert('messageAlert'), 4000); // 4초 후 자동 닫기
        }
    });
  </script>
</body>
</html>